<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>attendance_test.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include "gmock/gmock.h"
#include "attendance.h"
#include "IUser.h"
#include "IUserFactory.h"
#include "userFactory.h"
#include "type.h"
#include "user.h"

class AttendanceProcessorTest : public ::testing::Test {
protected:
    UserFactory factory;
    AttendanceProcessor attendpro;

<span style = "background-color:#dfd">    AttendanceProcessorTest() : attendpro(&amp;factory) {}</span>

<span style = "background-color:#dfd">    void SetUp() override {
    }
    void TearDown() override {
    }</span>
};

// IUser
<span style = "background-color:#dfd">TEST(UserFactoryTest, CreateUserBasic) {
    UserFactory factory;
    auto user = factory.CreateUser("TestUser", 42);</span>

<span style = "background-color:#dfd">    for (int idx = MONDAY; idx &lt; DAYCONT; idx++) {
        user-&gt;AddAttendance(idx);
    }
	user-&gt;AddPoints(11);
    user-&gt;SetGrade(NORMAL);</span>

<span style = "background-color:#dfd">    ASSERT_NE(user, nullptr);
    EXPECT_EQ(user-&gt;GetName(), "TestUser");
    EXPECT_EQ(user-&gt;GetId(), 42);
    EXPECT_EQ(user-&gt;GetPoints(), 11);
    EXPECT_EQ(user-&gt;GetGrade(), NORMAL);
    EXPECT_EQ(user-&gt;GetAttendance(WEDNESDAY), 1);
}</span>

// AttendanceProcessor
<span style = "background-color:#dfd">TEST_F(AttendanceProcessorTest, TESTGetID) {
    for (int idx = 0; idx &lt; 10; ++idx) {
        auto user = factory.CreateUser("TestUser" + std::to_string(idx), idx);
        attendpro.setTheBasicInfo(user-&gt;GetName(), "monday");
        EXPECT_EQ(attendpro.getId(user-&gt;GetName()), idx);
	}
}</span>

<span style = "background-color:#dfd">TEST_F(AttendanceProcessorTest, TESTGetWEEKIDEXVALID) {
    EXPECT_EQ(attendpro.getWeekdayIndex("monday"), MONDAY);
    EXPECT_EQ(attendpro.getWeekdayIndex("tuesday"), TUESDAY);
    EXPECT_EQ(attendpro.getWeekdayIndex("wednesday"), WEDNESDAY);
    EXPECT_EQ(attendpro.getWeekdayIndex("thursday"), THURSDAY);
    EXPECT_EQ(attendpro.getWeekdayIndex("friday"), FRIDAY);
    EXPECT_EQ(attendpro.getWeekdayIndex("saturday"), SATURDAY);
	EXPECT_EQ(attendpro.getWeekdayIndex("sunday"), SUNDAY);
    EXPECT_EQ(attendpro.getWeekdayIndex("2022"), INVALID);
}</span>

<span style = "background-color:#dfd">TEST_F(AttendanceProcessorTest, TESTISDEBUG) {
    string name = "Daisy";
    EXPECT_EQ(attendpro.isDebug(name), true);</span>

<span style = "background-color:#dfd">    name = "Ryan";
    EXPECT_EQ(attendpro.isDebug(name), false);
}</span>

<span style = "background-color:#dfd">TEST_F(AttendanceProcessorTest, TESTGETBASICPOINT) {
    for (int idx = 0; idx &lt; 2; ++idx) {
        auto user = factory.CreateUser("TestUser" + std::to_string(idx), idx);
        attendpro.setTheBasicInfo(user-&gt;GetName(), "monday");
    }</span>

<span style = "background-color:#dfd">    EXPECT_EQ(attendpro.getBasicPoint(1, MONDAY), 1);
    EXPECT_EQ(attendpro.getBasicPoint(1, TUESDAY), 1);
    EXPECT_EQ(attendpro.getBasicPoint(1, THURSDAY), 1);
    EXPECT_EQ(attendpro.getBasicPoint(1, FRIDAY), 1);
    EXPECT_EQ(attendpro.getBasicPoint(1, WEDNESDAY), 3);
    EXPECT_EQ(attendpro.getBasicPoint(1, SATURDAY), 2);
    EXPECT_EQ(attendpro.getBasicPoint(1, SUNDAY), 2);
}</span>

<span style = "background-color:#dfd">TEST_F(AttendanceProcessorTest, TESTSETTHEBAISCINFOINVALID) {
    string name = "RYAN";
    string weekday = "2022";</span>
    
<span style = "background-color:#dfd">    attendpro.setTheBasicInfo(name, weekday);
}</span>

<span style = "background-color:#dfd">TEST_F(AttendanceProcessorTest, TESTSETTHEBAISCINFOVALID) {
    string name = "RYAN";
    string weekday = "wednesday";</span>

<span style = "background-color:#dfd">    attendpro.setTheBasicInfo(name, weekday);
}</span>

<span style = "background-color:#dfd">TEST_F(AttendanceProcessorTest, TESTADDBONOUSEPOINTWED) {
    attendpro.setTheBasicInfo("TestUser", "saturday");
    int id = attendpro.getId("TestUser");
    IUser&amp; user = attendpro.getUser(id);</span>

<span style = "background-color:#dfd">    user.AddPoints(0);
    for (int idx = 0; idx &lt; 10; ++idx) {
        user.AddAttendance(WEDNESDAY);
        user.AddPoints(3);
    }</span>
    
<span style = "background-color:#dfd">    cout &lt;&lt; user.GetPoints() &lt;&lt; "\n";</span>

<span style = "background-color:#dfd">    attendpro.addBonousePoint(attendpro.getId(user.GetName()));
	EXPECT_EQ(user.GetPoints(), 42);</span>

<span style = "background-color:#dfd">    attendpro.getGrade(attendpro.getId(user.GetName()));
    EXPECT_EQ(user.GetGrade(), SILVER);
}
TEST_F(AttendanceProcessorTest, TESTADDBONOUSEPOINTWEEKEN) {
    attendpro.setTheBasicInfo("TestUser", "saturday");
    int id = attendpro.getId("TestUser");
    IUser&amp; user = attendpro.getUser(id);</span>

<span style = "background-color:#dfd">    for (int idx = 0; idx &lt; 10; ++idx) {
        attendpro.getBasicPoint(id, idx % 2 ? SUNDAY : SATURDAY);
        user.AddAttendance(idx % 2 ? SUNDAY : SATURDAY);
    }
    user.AddPoints(40);</span>

<span style = "background-color:#dfd">    attendpro.addBonousePoint(id);</span>

<span style = "background-color:#dfd">    EXPECT_EQ(user.GetPoints(), 52);</span>

<span style = "background-color:#dfd">    attendpro.getGrade(id);
    EXPECT_EQ(user.GetGrade(), GOLD);
}</span>

<span style = "background-color:#dfd">TEST_F(AttendanceProcessorTest, TESTGETGRADE) {
    attendpro.input();
}</span></pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>